<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Toolkit Food Garden ‚Äî Student Toolkit</title>
  <link rel="stylesheet" href="style.css">

  <!-- Internal CSS for rotating images with merge effect -->
  <style>
    .welcome-slider {
      position: relative;
      width: 100%;
      height: 320px; /* Keep original height */
      margin-top: 1.2rem;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .welcome-slider img {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      object-fit: contain; /* Full image visible */
      object-position: center center;
      transform: translate(-50%, -50%);
      opacity: 0;
      transition: opacity 1.5s ease-in-out;
      z-index: 2; /* Above background */
    }

    .welcome-slider img.active {
      opacity: 1;
    }

    /* Background merge of the same image to cover space */
    .welcome-slider::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center center;
      filter: blur(12px) brightness(0.85); /* subtle merge */
      z-index: 1;
      transition: background-image 1.5s ease-in-out;
    }

    @media (max-width: 768px) {
      .welcome-slider {
        height: 200px;
      }
    }
  </style>
</head>
<body>
 <!-- ===== Navbar with AI Avatar ===== -->
<nav class="topbar">
  <div class="logo">
    ü•¨ <span>CropLogic</span>
    <span id="ai-avatar" style="cursor:pointer; margin-left:8px;" title="Talk to Sherwon">üßë‚Äçüåæ</span>
  </div>
  <ul class="nav-links">
    <li><a href="#home">Home</a></li>
    <li><a href="#tools">Tools</a></li>
    <li><a href="#pests">Pests</a></li>
    <li><a href="#resources">Resources</a></li>
    <li><a href="#learn">Learn</a></li>
    <li><a href="#community">Community</a></li>
  </ul>
</nav>


<!-- AI Popup -->
<div id="ai-popup" style="display:none; position:fixed; top:70px; left:50%; transform:translateX(-50%); background:#081225; color:white; padding:12px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.4); z-index:999;">
  <p id="ai-popup-text"></p>
  <input type="text" id="ai-name-input" placeholder="Enter your name..." style="margin-top:6px; width:100%; padding:6px; border-radius:6px; border:none;" />
  <button id="ai-submit-name" style="margin-top:6px; width:100%; padding:6px; border:none; border-radius:6px; background:#16a34a; color:white; cursor:pointer;">Submit</button>
</div>

<!-- Listening Indicator -->
<div id="listening-indicator" style="display:none; position:fixed; bottom:20px; right:20px; background:#16a34a; color:white; padding:10px 16px; border-radius:50px; box-shadow:0 4px 12px rgba(0,0,0,0.4); font-family:sans-serif; font-weight:bold; z-index:1000; transform:scale(0); transition:transform 0.3s ease;">
  üëÇ Listening...
</div>

<script>
// ===== Sherwon AI Assistant =====

const aiAvatar = document.getElementById('ai-avatar');
let greeted = false;
let userName = null;
let userGender = "neutral";
let voices = [];

// ===== Load voices properly =====
speechSynthesis.onvoiceschanged = () => { voices = speechSynthesis.getVoices(); };

// ===== Dialog storage =====
const dialogQnA = [
    {q:"how are you", a:["I'm great, thanks! How about you?", "Feeling leafy today!"]},
    {q:"tell me a joke", a:["Why did the tomato turn red? Because it saw the salad dressing!", "Lettuce be friends forever!"]},
    {q:"what's up", a:["Just helping farmers grow! You?", "Chillin' in the garden!"]},
    {q:"i'm bored", a:["Let's explore some features on the page!", "I can tell you gardening tips or quiz you!"]},
    {q:"morning", a:["Good morning, sunshine!", "Rise and shine, farmer!"]},
    {q:"afternoon", a:["Good afternoon! Time for some farming fun!", "Hope your day is growing nicely!"]},
    {q:"evening", a:["Good evening! Ready to relax or learn?", "Evening, let's harvest some knowledge!"]}
];

// ===== Voice speaking =====
function speak(text, gender="neutral"){
    const utter = new SpeechSynthesisUtterance(text);
    let chosenVoice = voices[0];
    if (voices.length > 0){
        if(gender==="male") chosenVoice = voices.find(v=>v.name.toLowerCase().includes("male")) || voices[0];
        else if(gender==="female") chosenVoice = voices.find(v=>v.name.toLowerCase().includes("female")) || voices[0];
    }
    utter.voice = chosenVoice;
    utter.rate = 1;
    utter.pitch = 1;
    speechSynthesis.speak(utter);
}

// ===== Greeting =====
function greetUser(){
    speak("Hello! My name is Sherwon. I'm here to help you find any feature or chat if you're bored!");
    setTimeout(askUserName, 2000);
}

// ===== Ask for name =====
function askUserName(){
    const name = prompt("What is your name, farmer? ü§ñ");
    if(!name || name.trim()==="") userName = "Farmer";
    else userName = name.trim();
    userGender = Math.random()>0.5 ? "male":"female";

    const jokes = [
        `Nice to meet you, ${userName}! Ready to explore?`,
        `Hey ${userName}, let's grow your knowledge today!`,
        `Welcome ${userName}! I promise not to leaf you hanging!`
    ];
    const joke = jokes[Math.floor(Math.random()*jokes.length)];
    speak(joke, userGender);
    showGreetingDiv(joke);
    greeted = true;
}

// ===== Temporary greeting div =====
function showGreetingDiv(text){
    const div = document.createElement("div");
    div.id = "ai-greeting";
    div.style.position="fixed";
    div.style.top="60px";
    div.style.right="20px";
    div.style.background="#0f172a";
    div.style.color="#00ff99";
    div.style.padding="10px 15px";
    div.style.borderRadius="12px";
    div.style.fontWeight="bold";
    div.style.zIndex="999";
    div.textContent = text;
    document.body.appendChild(div);
    setTimeout(()=>div.remove(),5000);
}

// ===== Command handler =====
function handleCommand(cmd){
    cmd = cmd.toLowerCase();

    // Check dialog Q&A
    for(const item of dialogQnA){
        if(cmd.includes(item.q)){
            const response = item.a[Math.floor(Math.random()*item.a.length)];
            speak(`${userName}, ${response}`, userGender);
            return;
        }
    }

    // Section navigation
    const sections = {
        "tools":"#tools",
        "pests":"#pests",
        "learn":"#learn",
        "quiz":"#learn",
        "resources":"#resources",
        "community":"#community"
    };
    for(const key in sections){
        if(cmd.includes(key) || cmd.includes("go to "+key)){
            const section = document.querySelector(sections[key]);
            if(section) section.scrollIntoView({behavior:"smooth"});
            speak(`Going to ${key}, ${userName}!`, userGender);
            if(key==="quiz" || cmd.includes("start quiz")) autoStartQuiz();
            return;
        }
    }

    // Tips / Motivation
    if(cmd.includes("tip")){
        const tip = document.getElementById("daily-tip")?.textContent || "No tip today!";
        speak(`${userName}, here's your tip: ${tip}`, userGender);
        return;
    }
    if(cmd.includes("motivation")){
        const mot = document.getElementById("daily-motivation")?.textContent || "Keep growing strong!";
        speak(`${userName}, motivation for you: ${mot}`, userGender);
        return;
    }

    // Books / coding
    if(cmd.includes("books") || cmd.includes("algorithm") || cmd.includes("coding")){
        speak(`Alright ${userName}, let's see some books about algorithms and coding!`, userGender);
        document.querySelector("#learn")?.scrollIntoView({behavior:"smooth"});
        return;
    }

    // Fallback search
    speak(`Hmm ${userName}, I am not sure. Let's search online!`, userGender);
    window.open(`https://www.google.com/search?q=${encodeURIComponent(cmd)}`, "_blank");
}

// ===== Quiz helper =====
function autoStartQuiz(){
    const startBtn = document.getElementById("start-quiz");
    if(startBtn){
        startBtn.click();
        speak(`Starting the quiz, ${userName}!`, userGender);
    }
}

// ===== Voice recognition =====
function startVoiceRecognition(){
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if(!SpeechRecognition){
        speak("Voice recognition not supported in your browser.");
        return;
    }
    const recognition = new SpeechRecognition();
    recognition.lang="en-US";
    recognition.interimResults=false;
    recognition.maxAlternatives=1;
    aiAvatar.textContent="üéôÔ∏è";

    recognition.onresult=(event)=>{
        const cmd = event.results[0][0].transcript;
        handleCommand(cmd);
    };
    recognition.onerror=()=> speak("Sorry, I didn't catch that.");
    recognition.onend=()=> { aiAvatar.textContent="üßë‚Äçüåæ"; };

    recognition.start();
}

// ===== Avatar click =====
aiAvatar.addEventListener("click", ()=>{
    if(!greeted) greetUser();
    else startVoiceRecognition();
});
</script>


  <!-- HERO -->
  <header id="home" class="hero">
    <div class="hero-left">
      <h1>Grow food. Grow knowledge.</h1>
      <p class="lead">Free student toolkit ‚Äî works offline, no signup. Practical planting guides, safe pest solutions, and fun learning tools.</p>
      <div class="hero-actions">
        <button class="btn" data-scroll="#tools">Try Tools</button>
        <button class="btn" data-scroll="#pests">Pest Solutions</button>
        <button class="btn" data-scroll="#learn">Quick Lessons</button>
      </div>

<!-- ‚úÖ Rotating Welcome Images -->
<div class="welcome-slider" id="welcome-slider">
  <img src="garden1.jpg.jpg" alt="Students gardening" class="active">
  <img src="garden2.jpg.jpg" alt="Fresh vegetables harvest">
  <img src="garden3.jpg.jpg" alt="Community garden teamwork">
</div>


    <!-- AI CHATBOT NEXT TO HERO -->
    <aside class="hero-right card">
      <div>
        <strong>AI Assistant</strong>
        <div id="chat-container" class="chat-container"></div>
        <div class="chat-input-area">
          <input type="text" id="ai-search" placeholder="Ask a question..." aria-label="Ask the AI" />
          <button id="ai-send" title="Ask AI">Send</button>
          <button id="mic-btn" title="Use voice">üé§</button>
        </div>
      </div>

      <hr/>

      <div>
        <strong>Today's Tip</strong>
        <p id="daily-tip" class="tiptext">...</p>
        <small class="muted">Tip stored locally and rotates daily.</small>
      </div>

      <hr/>

      <div>
        <strong>Motivation</strong>
        <p id="daily-motivation" class="muted">...</p>
      </div>
    </aside>
  </header>

  <!-- MAIN CONTENT -->
  <main class="container">
    <!-- Tools Section -->
    <section id="tools" class="card">
      <h2>Tools & Productivity</h2>
      <div class="grid">
        <img src="tools.pjp.jpg" alt="Gardening tools and productivity setup">
        <!-- To-do / Calendar -->
        <div>
          <h3>To-Do / Calendar</h3>
          <input id="task-input" placeholder="Add task (e.g. Water spinach)" />
          <label for="task-date">Select date:</label>
          <input type="date" id="task-date" />
          <div class="row">
            <button id="add-task" class="btn">Add Task</button>
            <button id="clear-tasks" class="btn outline">Clear All</button>
          </div>
          <div id="calendar"></div>
          <ul id="tasks" class="list"></ul>
        </div>

        <!-- Seed spacing -->
        <div>
          <h3>Seed Spacing Calculator</h3>
          <label>Bed width (cm)</label>
          <input id="bed-width" type="number" value="100" />
          <label>Plant spacing (cm)</label>
          <input id="spacing" type="number" value="20" />
          <div class="row">
            <button id="calc-btn" class="btn">Calculate</button>
            <div id="calc-result" class="muted inline"></div>
          </div>

          <hr/>
          <h3>Watering Guide</h3>
          <select id="water-frequency">
            <option value="3">Water every 3 days</option>
            <option value="2">Water every 2 days</option>
            <option value="1">Daily</option>
          </select>
          <button id="water-btn" class="btn" style="margin-top:.6rem">Show Schedule</button>
          <div id="water-schedule" class="muted" style="margin-top:.5rem"></div>
        </div>

       <!-- Weather Helper -->
<div>
  <h3>Weather Helper</h3>
  <p class="small">Enter your town for garden advice.</p>
  <input id="weather-city" placeholder="Town e.g. Soshanguve" />
  <button id="get-weather" class="btn">Get Advice</button>
  <div id="weather-result" class="muted"></div>
</div>

    </section>
  </main>

  <!-- Pests -->
  <section id="pests" class="card">
    <h2>Safe Pest Management (IPM)</h2>
    <div class="grid">
      <img src="pest.pjp.jpg" alt="Safe pest management in gardening">
      <div>
        <h3>Prevention</h3>
        <ul>
          <li>Keep beds tidy and remove infected leaves.</li>
          <li>Rotate crops and avoid planting same family in same bed.</li>
          <li>Use companions: marigold, garlic, basil.</li>
          <li>Encourage beneficial insects (ladybugs).</li>
        </ul>
      </div>

      <div>
        <h3>Simple Rural Sprays (safe)</h3>
        <div class="notice"><strong>Safety:</strong> household remedies; avoid getting spray in eyes; keep away from young children.</div>
        <h4>Soapy Spray</h4>
        <ol>
          <li>1 tsp mild liquid soap + 1 L water. Spray underside of leaves.</li>
          <li>Repeat 3‚Äì4 days until pests reduce.</li>
        </ol>
        <h4>Neem Emulsion</h4>
        <ol>
          <li>1‚Äì2 ml neem oil + drop mild soap per 1 L water. Shake well.</li>
          <li>Apply in evening; reapply weekly.</li>
        </ol>
        <h4>Garlic & Chili Repellent</h4>
        <ol>
          <li>Crush 3 garlic cloves + 1 chili in 1 L water; strain; add 1 tsp soap. Test on 1 leaf first.</li>
        </ol>
      </div>
    </div>
  </section>

  <!-- Resources -->
  <section id="resources" class="card">
    <h2>Resource Library</h2>
    <div class="grid">
      <div>
        <h3>Download Guides</h3>
        <ul>
          <li><a href="#" download>Beginner Gardening Guide (PDF)</a></li>
          <li><a href="#" download>Composting Steps (PDF)</a></li>
        </ul>
      </div>

      <div>
        <h3>Learn More</h3>
        <ul>
          <li><a href="https://www.google.com/search?q=maize+farming" target="_blank">Learn about Maize</a></li>
          <li><a href="https://www.google.com/search?q=wheat+farming" target="_blank">Learn about Wheat</a></li>
          <li><a href="https://www.google.com/search?q=general+farming+techniques" target="_blank">Learn about Farming</a></li>
          <li><a href="https://www.google.com/search?q=food+gardening" target="_blank">Learn about Food Gardening</a></li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Learn -->
  <section id="learn" class="card">
    <h2>Learn & Games</h2>
    <div class="grid">
      <img src="Leran&games.pjp.jpg" alt="Student learning how to farm or plant">
      <div>
        <h3>Companion Planting</h3>
        <ul>
          <li>Tomato + Basil</li>
          <li>Beans + Maize</li>
          <li>Marigold near beds</li>
        </ul>
      </div>

      <div>
        <h3>Quick Quiz</h3>
        <button id="start-quiz" class="btn">Start Quiz</button>
        <div id="quiz-area"></div>
      </div>
    </div>
  </section>

  <!-- ‚úÖ JS for rotating welcome images with merged background -->
  <script>
    const slides = document.querySelectorAll('#welcome-slider img');
    const slider = document.getElementById('welcome-slider');
    let index = 0;

    function updateBackground() {
      slider.style.setProperty('--bg-img', `url(${slides[index].src})`);
      slider.style.backgroundImage = `url(${slides[index].src})`;
      slider.querySelector('::before'); // Not required but kept for reference
    }

    setInterval(() => {
      slides[index].classList.remove('active');
      index = (index + 1) % slides.length;
      slides[index].classList.add('active');
      updateBackground();
    }, 10000);

    // Initialize background
    slider.style.backgroundImage = `url(${slides[0].src})`;
  </script>


<script>
document.addEventListener('DOMContentLoaded', () => {
  const quizBtn = document.getElementById('start-quiz');
  const quizArea = document.getElementById('quiz-area');

  const quizData = {
    "Water Management": [
      { q: "How often should you water young seedlings?", a: ["Once a week", "2‚Äì3 times per week", "Every day"], correct: 1 },
      { q: "Watering in the early morning helps reduce:", a: ["Evaporation", "Soil fertility", "Pests"], correct: 0 }
    ],
    "Planting by Soil Recognition": [
      { q: "Which soil is best for root vegetables?", a: ["Clay", "Sandy", "Loamy"], correct: 2 },
      { q: "Soil testing helps determine:", a: ["pH level", "Sunlight exposure", "Watering schedule"], correct: 0 }
    ],
    "Types of Plants": [
      { q: "Which plant is nitrogen-fixing?", a: ["Tomato", "Beans", "Carrot"], correct: 1 },
      { q: "Marigolds are useful for:", a: ["Attracting pests", "Repelling pests", "Providing shade"], correct: 1 }
    ]
  };

  let currentQuiz = [];
  let currentIndex = 0;
  let score = 0;

  function renderCategorySelection() {
    quizArea.innerHTML = '<h4>Select a Category:</h4>';
    Object.keys(quizData).forEach(cat => {
      const btn = document.createElement('button');
      btn.textContent = cat;
      btn.className = 'btn';
      btn.addEventListener('click', () => startQuiz(cat));
      quizArea.appendChild(btn);
    });
  }

  function startQuiz(category) {
    currentQuiz = quizData[category];
    currentIndex = 0;
    score = 0;
    renderQuestion();
  }

  function renderQuestion() {
    if (currentIndex >= currentQuiz.length) {
      quizArea.innerHTML = `<h4>Quiz Completed!</h4>
                            <p>Your score: ${score} / ${currentQuiz.length}</p>
                            <button class="btn" id="restart-quiz">Restart</button>`;
      document.getElementById('restart-quiz').addEventListener('click', renderCategorySelection);

      // ‚úÖ Sherwon AI response after quiz
      if(typeof speak === "function" && typeof userName !== "undefined"){
        const percent = (score / currentQuiz.length) * 100;
        if(percent >= 70){
          speak(`Excellent work, ${userName}! You scored ${score} out of ${currentQuiz.length}. Keep it up!`);
        } else if(percent >= 50){
          speak(`Not bad, ${userName}! You scored ${score} out of ${currentQuiz.length}. Keep practicing and you'll improve!`);
        } else {
          speak(`Don't worry, ${userName}! You scored ${score} out of ${currentQuiz.length}. Let's try again and you'll get better!`);
        }
      }

      return;
    }

    const qObj = currentQuiz[currentIndex];
    quizArea.innerHTML = `<p><strong>${qObj.q}</strong></p>`;
    qObj.a.forEach((ans, i) => {
      const btn = document.createElement('button');
      btn.textContent = ans;
      btn.className = 'btn';
      btn.addEventListener('click', () => checkAnswer(i));
      quizArea.appendChild(btn);
    });
  }

  function checkAnswer(selected) {
    if (selected === currentQuiz[currentIndex].correct) score++;
    currentIndex++;
    renderQuestion();
  }

  quizBtn.addEventListener('click', renderCategorySelection);
});
</script>

  <!-- Recipes -->
  <section id="recipes" class="card">
    <h2>Healthy Recipes</h2>
    <div class="grid">
      <div>
        <h3>Spinach & Tomato Stew</h3>
        <ol>
          <li>Saut√© onion & garlic, add tomatoes.</li>
          <li>Add spinach, simmer 5‚Äì7 min.</li>
        </ol>
      </div>

      <div>
        <h3>Vegetable Soup</h3>
        <ol>
          <li>Boil diced veggies, season, mash for younger kids.</li>
        </ol>
      </div>
    </div>
  </section>


<!-- Community -->
<section id="community" class="card" style="background:#0b1f0f; color:#e2e8f0; padding:20px; border-radius:8px;">
  <h2 class="mb-2 text-lg font-bold text-green-400">Community Q&A</h2>
  <p class="small mb-4 text-gray-300">
    Ask questions, share answers, and upvote helpful posts. Posts are stored locally.
  </p>
  <div class="grid">
    <img src="community.pjp.jpg" alt="Community farming or planting together">
    <!-- Ask a Question -->
    <textarea id="post-text" placeholder="Ask a question or share your knowledge..." rows="3"
      class="w-full p-2 border rounded mb-2 bg-[#1a2f1a] text-gray-200 border-green-600"></textarea>

    <!-- Category Selection -->
    <div class="row mt-2">
      <label for="post-category" class="small">Choose a type:</label>
      <select id="post-category" class="ml-2 border rounded p-1 bg-[#1a2f1a] text-gray-200 border-green-600">
        <option value="question">‚ùì Question</option>
        <option value="answer">üí° Answer</option>
        <option value="discussion">üí¨ Discussion</option>
      </select>
    </div>

    <!-- Buttons -->
    <div class="row mt-3 space-x-2">
      <button id="post-btn" class="btn" style="background:#16a34a; color:white; padding:6px 12px; border-radius:6px;">Post</button>
      <button id="clear-posts" class="btn outline" style="border:1px solid #16a34a; color:#16a34a; padding:6px 12px; border-radius:6px;">Clear All</button>
    </div>

    <!-- Filter Tags -->
    <div class="mt-4 space-x-2">
      <span class="filter-tag active" data-filter="all">All</span>
      <span class="filter-tag tag-question" data-filter="question">Question</span>
      <span class="filter-tag tag-answer" data-filter="answer">Answer</span>
      <span class="filter-tag tag-discussion" data-filter="discussion">Discussion</span>
    </div>

    <!-- Posts (Q&A Style) -->
    <div id="posts" class="mt-6 space-y-4"></div>
  </div>
</section>

<!-- Styling -->
<style>
  /* Category Highlight Colors */
  .category-question { border-left: 5px solid #22c55e; background:#102515; }
  .category-answer { border-left: 5px solid #4ade80; background:#132c18; }
  .category-discussion { border-left: 5px solid #6b7280; background:#1a1f1a; }

  /* Tag Styles */
  .tag, .filter-tag {
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    cursor: pointer;
  }
  .tag-question { background: #14532d; color: #22c55e; }
  .tag-answer { background: #166534; color: #4ade80; }
  .tag-discussion { background: #374151; color: #d1d5db; }

  /* Filter Tags */
  .filter-tag { border: 1px solid transparent; margin-right: 4px; }
  .filter-tag.active { border: 1px solid #22c55e; background: #14532d; color: #4ade80; }
</style>

<script>
const postBtn = document.getElementById("post-btn");
const clearBtn = document.getElementById("clear-posts");
const postsDiv = document.getElementById("posts");
const filterTags = document.querySelectorAll(".filter-tag");

// Example names for replies
const exampleUsers = ["Addy", "Tumi", "Sipho", "Lebo", "Zola"];
const exampleResponses = [
  "plz try this strategy for farming maize, maybe it will work!",
  "I found that spacing the plants properly really helps.",
  "Water early in the morning, it seems to make a big difference.",
  "Try rotating your crops, it improved my harvest.",
  "Use companion planting, it worked for me!"
];

// ===== Voice speaking function =====
function speak(text, gender="neutral") {
    const utter = new SpeechSynthesisUtterance(text);
    const voices = speechSynthesis.getVoices();
    let chosenVoice;

    if (gender === "male") {
        chosenVoice = voices.find(v => v.name.toLowerCase().includes("male")) || voices[0];
    } else if (gender === "female") {
        chosenVoice = voices.find(v => v.name.toLowerCase().includes("female")) || voices[0];
    } else {
        chosenVoice = voices[0];
    }

    utter.voice = chosenVoice;
    utter.rate = 1;
    utter.pitch = 1;
    speechSynthesis.speak(utter);
}

// Add Post
postBtn.addEventListener("click", () => {
  const text = document.getElementById("post-text").value.trim();
  const category = document.getElementById("post-category").value;

  if (!text) return alert("Please write something before posting.");

  // Create main post
  const post = document.createElement("div");
  post.className = `flex flex-col border rounded p-4 shadow category-${category}`;
  post.dataset.category = category;

  post.innerHTML = `
    <div class="flex flex-col items-start">
      <h3 class="font-semibold ${
        category === "question"
          ? "text-green-400"
          : category === "answer"
          ? "text-green-300"
          : "text-gray-300"
      }">${category.charAt(0).toUpperCase() + category.slice(1)}</h3>
      <p class="mt-1 text-gray-200">${text}</p>
    </div>
    <div class="mt-2 flex space-x-2 text-sm text-gray-400">
      <span class="tag tag-${category}">${category.charAt(0).toUpperCase() + category.slice(1)}</span>
      <button class="hover:underline">üí¨ Reply</button>
    </div>
  `;

  postsDiv.prepend(post);

  // If question, generate 3 random example answers
  if (category === "question") {
    const userNameInput = userName || "Farmer"; // use AI stored name or default
    const repliesToSpeak = [];

    for (let i = 0; i < 3; i++) {
      const reply = document.createElement("div");
      reply.className = "flex flex-col border-l-4 border-green-600 pl-4 mt-2 bg-[#102515] p-2 rounded";
      const randomUser = exampleUsers[Math.floor(Math.random() * exampleUsers.length)];
      const randomResponse = exampleResponses[Math.floor(Math.random() * exampleResponses.length)];
      const replyText = `Hello ${userNameInput}, ${randomResponse}`;
      reply.innerHTML = `<strong>${randomUser}:</strong> ${replyText}`;
      post.appendChild(reply);

      repliesToSpeak.push(`${randomUser} says: ${replyText}`);
    }

    // Speak each reply with small delay between them
    repliesToSpeak.forEach((txt, idx) => {
      setTimeout(() => speak(txt, userGender), idx * 3000);
    });
  }

  document.getElementById("post-text").value = "";
});

// Clear Posts
clearBtn.addEventListener("click", () => {
  postsDiv.innerHTML = "";
});

// Filter Posts
filterTags.forEach(tag => {
  tag.addEventListener("click", () => {
    filterTags.forEach(t => t.classList.remove("active"));
    tag.classList.add("active");

    const filter = tag.dataset.filter;
    const posts = postsDiv.querySelectorAll("div[data-category]");

    posts.forEach(post => {
      if (filter === "all" || post.dataset.category === filter) {
        post.style.display = "flex";
      } else {
        post.style.display = "none";
      }
    });
  });
});
</script>


  <!-- FOOTER -->
  <footer class="footer">
    <div>¬© 2025 Food for Learning ‚Äî Free student toolkit (no signup)</div>
  </footer>

  <script src="script.js"></script>
</body>
</html>